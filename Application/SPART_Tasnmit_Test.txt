
# Set Stack Pointer ;
LLW R1 0X6741 ;
LHW R1 0X724D ;

LLW R15 0X5674 ;
LHW R15 0X446F ;

LLW R23 0X4769 ;
LHW R23 0X397A ;

LLW R30 0X556B ;
LHW R30 0X4873 ;


# Infinitely send STACK POINTER value via SPART
# R2 - SPART Address
# R3 -  SPART Status address
# R4 - SPART Read Mask
# R5 - SPART Write Mask
# R6 - Value read from spart
LLW R2 0x0000 ;
LHW R2 0x0800 ;
LLW R3 0x0001 ;
LHW R3 0x0800 ;
LLW R4 0x0002 ;
LLW R5 0x0001 ;

SPART_TX_NOT_READY_1 LOAD R6 R3 0x00 ;
AND R0 R6 R5 ;
B EQ SPART_TX_NOT_READY_1 ;

STORE R1 R2 ;

SPART_TX_NOT_READY_2 LOAD R6 R3 0x00 ;
AND R0 R6 R5 ;
B EQ SPART_TX_NOT_READY_2 ;

STORE R15 R2 ;

SPART_TX_NOT_READY_3 LOAD R6 R3 0x00 ;
AND R0 R6 R5 ;
B EQ SPART_TX_NOT_READY_3 ;

STORE R23 R2 ;

SPART_TX_NOT_READY_4 LOAD R6 R3 0x00 ;
AND R0 R6 R5 ;
B EQ SPART_TX_NOT_READY_4 ;

STORE R30 R2 ;



B UNCOND SPART_TX_NOT_READY_1 ;
