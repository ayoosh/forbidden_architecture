
#define STACK_ADDR_LOW 0XFFFF ;
#define STACK_ADDR_HIGH 0X03FF ;

#define SPART_ADDR_HIGH 0X0800 ;

#define SPART_READ_MASK 2 ;
#define SPART_WRITE_MASK 1 ;

# Set Stack Pointer ;
LLW R1 0XFFFF ;
LHW R1 0X03FF ;

AND R5 R0 R0 ;
AND R6 R0 R0 ;
LLW R5 SPART_WRITE_MASK ;
LLW R6 SPART_READ_MASK ;
AND R7 R0 R0 ;

# Poll on SPART status register ;
SPART_WRITE_STATUS_POLL LOAD R4 0 ;
AND R4 R4 R5 ;
BEQ SPART_WRITE_STATUS_POLL ;

